import{_ as h,c as d,a as c,l as g,b as e,d as p,j as x,m as C,n as f,h as n,p as w,o as l,k,q as v}from"./app-CUJ9P7mJ.js";const y={data(){return{isLoading:!1,credits:{data:[],per_page:20,current_page:1,total:0}}},methods:{parseCredits(){axios.post("/api/crawler/credits").then(i=>{this.$message({message:i.data.message,type:i.data.type})})},getCredits(){this.isLoading=!0,axios.get("/api/admin/credits",{params:{page:this.credits.current_page,per_page:this.credits.per_page}}).then(i=>{this.credits=i.data,this.isLoading=!1})}},mounted(){this.getCredits()}},z={class:"mb-3"},B={key:0};function L(i,r,N,S,t,o){const m=n("el-button"),a=n("el-table-column"),_=n("el-table"),u=n("el-pagination"),b=w("loading");return l(),d("section",null,[c("h1",null,"Кредиты ("+g(t.credits.total)+")",1),c("div",z,[e(m,{onClick:x(o.parseCredits,["prevent"]),type:"primary",icon:"Refresh"},{default:p(()=>r[2]||(r[2]=[k("Парсить кредиты sravni.ru")])),_:1},8,["onClick"])]),C((l(),f(_,{data:t.credits.data,style:{width:"100%","margin-bottom":"20px"}},{default:p(()=>[e(a,{label:"Название","min-width":"170px",prop:"name",sortable:""}),e(a,{label:"Банк","min-width":"170px",sortable:""},{default:p(s=>[s.row.bank?(l(),d("span",B,g(s.row.bank.name),1)):v("",!0)]),_:1}),e(a,{label:"Ставка","min-width":"120px",prop:"bid",sortable:""}),e(a,{label:"ПСК","min-width":"120px",prop:"psk",sortable:""}),e(a,{label:"Срок","min-width":"170px",prop:"term",sortable:""}),e(a,{label:"Сумма кредита","min-width":"170px",prop:"sum",sortable:""}),e(a,{label:"Возраст","min-width":"170px",prop:"age",sortable:""})]),_:1},8,["data"])),[[b,t.isLoading]]),e(u,{background:"",layout:"sizes, prev, pager, next","page-sizes":[20,50,100,250,500],size:"default","current-page":t.credits.current_page,"onUpdate:currentPage":r[0]||(r[0]=s=>t.credits.current_page=s),"page-size":t.credits.per_page,"onUpdate:pageSize":r[1]||(r[1]=s=>t.credits.per_page=s),total:t.credits.total,onCurrentChange:o.getCredits,onSizeChange:o.getCredits},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])}const D=h(y,[["render",L]]);export{D as default};
