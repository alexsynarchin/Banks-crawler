import{_ as y,r as h,u as v,v as _,w as F,t as V,c as k,a,b as t,d,e as R,f as T,E as b,g as C,h as p,o as E,i as L,j as Q,k as j}from"./app-CUJ9P7mJ.js";const B={name:"Login",components:{},setup(n,e){const f=R(),o=h({loginForm:{email:"",password:""},ruleFormRef:{},loading:!1,pwdType:"password",redirect:void 0,otherQuery:{}}),g=()=>{o.pwdType==="password"?o.pwdType="":o.pwdType="password"},w=v(),{t:i}=_.useI18n(),m=l=>{l&&T().then(()=>{o.loading=!0,w.login(o.loginForm).then(()=>{b({message:i("login.loginSuccess"),type:"success"}),f.push({path:o.redirect||"/",query:o.otherQuery},s=>{}),o.loading=!1}).catch(s=>{console.log(s),o.loading=!1})})},r=l=>Object.keys(l).reduce((s,c)=>(c!=="redirect"&&(s[c]=l[c]),s),{}),u=C();return F(()=>u.query,l=>{l&&(o.redirect=l.redirect,o.otherQuery=r(l))},{immediate:!0}),{...V(o),showPwd:g,handleLogin:m,getOtherQuery:r}}},N={class:"login"},P={class:"login-container"},S={class:"login-content"},U={class:"svg-container"},$={class:"svg-container"};function I(n,e,f,o,g,w){const i=p("icon"),m=p("el-input"),r=p("el-form-item"),u=p("el-button"),l=p("el-form");return E(),k("div",N,[a("div",P,[e[7]||(e[7]=a("div",{class:"login-image"},null,-1)),a("div",S,[t(l,{ref:"ruleFormRef",model:n.loginForm,class:"login-form","auto-complete":"on","label-position":"left"},{default:d(()=>[e[6]||(e[6]=a("div",{class:"title-wrap"},[a("h3",{class:"title"}," Войти в панель управления ")],-1)),t(r,{prop:"email"},{default:d(()=>[a("span",U,[t(i,{"class-name":"person-fill"})]),t(m,{modelValue:n.loginForm.email,"onUpdate:modelValue":e[0]||(e[0]=s=>n.loginForm.email=s),name:"email",type:"text","auto-complete":"on",placeholder:n.$t("login.email")},null,8,["modelValue","placeholder"])]),_:1}),t(r,{prop:"password"},{default:d(()=>[a("span",$,[t(i,{"class-name":"shield-lock"})]),t(m,{modelValue:n.loginForm.password,"onUpdate:modelValue":e[1]||(e[1]=s=>n.loginForm.password=s),name:"password","auto-complete":"on",placeholder:"Пароль",type:n.pwdType,onKeyup:e[2]||(e[2]=L(s=>o.handleLogin(n.ruleFormRef),["enter","native"]))},null,8,["modelValue","type"]),a("span",{class:"show-pwd",onClick:e[3]||(e[3]=(...s)=>o.showPwd&&o.showPwd(...s))},[t(i,{"class-name":n.pwdType==="password"?"eye-fill":"eye-slash-fill"},null,8,["class-name"])])]),_:1}),t(r,null,{default:d(()=>[t(u,{loading:n.loading,type:"primary",style:{width:"100%"},onClick:e[4]||(e[4]=Q(s=>o.handleLogin(n.ruleFormRef),["prevent"]))},{default:d(()=>e[5]||(e[5]=[j(" Войти ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}const M=y(B,[["render",I]]);export{M as default};
